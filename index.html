<!DOCTYPE html>
<html>
<head>
  <title>Braille COnverter</title>
  <link rel="stylesheet" href="//yui.yahooapis.com/pure/0.6.0/pure-min.css">
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
  <link rel="stylesheet" href="stylesheets/marketing.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/styles/dark.min.css">
  <link href='//fonts.googleapis.com/css?family=Share+Tech+Mono' rel='stylesheet' type='text/css'>
  <!--[if lte IE 8]>
    <link rel="stylesheet" href="//yui.yahooapis.com/pure/0.6.0/grids-responsive-old-ie-min.css">
<![endif]-->
<!--[if gt IE 8]><!-->
    <link rel="stylesheet" href="//yui.yahooapis.com/pure/0.6.0/grids-responsive-min.css">
<!--<![endif]-->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.3/ScrollMagic.min.js"></script>
  <script type="text/javascript" src="///cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js"></script>
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/languages/bash.min.js"></script>
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/languages/javascript.min.js"></script>
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/require.js/2.1.17/require.min.js"></script>
  <script type="text/javascript" src="//rawgit.com/elektrowolle/braille/master/Braille.js"></script>
  <style type="text/css">
    .button-xsmall {
        font-size: 70%;
    }

    .button-small {
        font-size: 85%;
    }

    .button-large {
        font-size: 110%;
    }

    .button-xlarge {
        font-size: 125%;
    }

    textarea{
      font-family: 'Share Tech Mono';
      height: 80pt;
    }
  </style>
</head>
<body>
  <div class="splash-container">
      <div class="splash">
          <h1 class="splash-head">Braille Converter</h1>

      </div>
  </div>
  <div class="content-wrapper">
    <div class="content">
      <div class="ribbon l-box-lrg pure-g">
        <div class="l-box-lrg is-center pure-u-1 pure-u-md-1-2 pure-u-lg-1-2">
          <h2 class="content-head content-head-ribbon">From Braille</h2>
          <div id="trigger1" class="spacer s0"></div>
          <form class="pure-form">
            <fieldset class="pure-group">
              <textarea class="pure-input-1" id="brailleInput"></textarea>
            </fieldset>
          </form>
        </div>
        <div class="l-box-lrg is-center pure-u-1 pure-u-md-1-2 pure-u-lg-1-2">
          <h2 class="content-head content-head-ribbon">To Braille</h2>
           <form class="pure-form">
            <fieldset>
              <input type="text" id="textInput">
            </fieldset>
          </form>
        </div>
      </div>

      <div>
        <h2 class="content-head is-center">Check it out!</h2>
        <h3>Use as cdn</h3>
        <pre><code class='html'><!--
             -->&lt;script type=&quot;text/javascript&quot; src=&quot;//cdn.rawgit.com/elektrowolle/braille/master/Braille.js&quot;&gt;&lt;/script&gt;<!--
         --></code></pre>

        <h3>Or pull the git</h3>
        <pre><code class='sh'><!--
           -->git clone https://github.com/elektrowolle/braille.git<!--
         --></code></pre>

        <h3>Then use it!</h3>
        <pre><code class=''><!--
           -->var str = Braille.convertToBraille('hello world');
<!--
           -->console.log(str);

<!--           -->// o-o-o-o-o----oo-o-o-oo
<!--           -->// oo-oo-o--o--oo-oooo--o
<!--           -->// ----o-o-o----oo-o-o---

<!--           -->console.log(Braille.convertFromBraille(str));
<!--
           -->//hello world<!--
         --></code></pre>

        <h3>Look it up!</h3>
        At <a href="//github.com/elektrowolle/braille">Github</a>

        <hr>
        Benjamin Skirlo 2015
      </div>

    </div>
  </div>


  <script type="text/javascript">

  var controller = {};
  var scene = {};
    $('#brailleInput').bind('input propertychange', function () {
      $('#textInput').val(Braille.convertFromBraille($('#brailleInput').val()));
    });
    $('#textInput').bind('input propertychange', function () {

      $('#brailleInput').val(Braille.convertToBraille($('#textInput').val()));

    });

    $(function () {
      hljs.initHighlightingOnLoad();
        var _default = "Hello World";
        waitForAlphabet(function(){

            controller = new ScrollMagic.Controller();

            //build scene
            scene = new ScrollMagic.Scene({triggerElement: "#trigger1"})
                    .addTo(controller)
                    // .addIndicators() // add indicators (requires plugin)
                    .on("start", function (e) {
                      console.log("start animation");
                      if($('#brailleInput').val() == ''){
                        $('#brailleInput').val('');
                        $('#textInput').val('');
                        nextCharacter(_default, 0);
                      }
                    });

            console.log('scene is set up');
          // })



        });

      }
    );

    function waitForAlphabet (callBack) {
      setTimeout(function(){
        if(typeof Braille.alphabet.en == 'undefined')
          waitForAlphabet(callBack);
        else{
          console.log('alphabet ready');
          callBack();
        }
      }, 100)
    }

    function nextCharacter (str, i) {
      console.log('write ' + str[i]);
      setTimeout(function(){
        $('#textInput').val($('#textInput').val() + str[i]);
        $('#brailleInput').val(
          Braille.convertToBraille($('#textInput').val())
        );

        $('#textInput').change();
        if(str.length > i + 1)
          nextCharacter(str, i + 1);
      },200)
    };
  </script>
</body>
</html>
