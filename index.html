<!DOCTYPE html>
<html>
<head>
  <title>Braile COnverter</title>
  <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">
  <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
  <link rel="stylesheet" href="stylesheets/marketing.css">
  <link href='http://fonts.googleapis.com/css?family=Share+Tech+Mono' rel='stylesheet' type='text/css'>
  <!--[if lte IE 8]>
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/grids-responsive-old-ie-min.css">
<![endif]-->
<!--[if gt IE 8]><!-->
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/grids-responsive-min.css">
<!--<![endif]-->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.17/require.min.js"></script>
  <script type="text/javascript" src="https:///cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script type="text/javascript" src="https://rawgit.com/elektrowolle/braile/master/Braile.js"></script>
  <!-- // <script type="text/javascript" src="https://raw.githubusercontent.com/elektrowolle/braile/master/Braile.js"></script> -->
  <style type="text/css">
    .button-xsmall {
        font-size: 70%;
    }

    .button-small {
        font-size: 85%;
    }

    .button-large {
        font-size: 110%;
    }

    .button-xlarge {
        font-size: 125%;
    }

    textarea{
      font-family: 'Share Tech Mono';
      height: 80pt;
    }
  </style>
</head>
<body>
  <div class="splash-container">
      <div class="splash">
          <h1 class="splash-head">Braile Converter</h1>

      </div>
  </div>
  <div class="content-wrapper">
    <div class="content">
      <div class="ribbon l-box-lrg pure-g">
        <div class="l-box-lrg is-center pure-u-1 pure-u-md-1-2 pure-u-lg-1-2">
          <h2 class="content-head content-head-ribbon">From Braile</h2>
          <form class="pure-form">
            <fieldset class="pure-group">
              <textarea class="pure-input-1" id="braileInput"></textarea>
            </fieldset>
          </form>
        </div>
        <div class="l-box-lrg is-center pure-u-1 pure-u-md-1-2 pure-u-lg-1-2">
          <h2 class="content-head content-head-ribbon">To Braile</h2>
           <form class="pure-form">
            <fieldset>
              <input type="text" id="textInput">
            </fieldset>
          </form>
        </div>
      </div>
    </div>
  </div>

  <script type="text/javascript">
    $('#braileInput').bind('input propertychange', function () {
      $('#textInput').val(Braile.convertFromBraile($('#braileInput').val()));
    });
    $('#textInput').bind('input propertychange', function () {

      $('#braileInput').val(Braile.convertToBraile($('#textInput').val()));

    });

    $(function () {
        var _default = "Hello World";
        waitForAlphabet(function(){nextCharacter(_default, 0);});

      }
    );

    function waitForAlphabet (callBack) {
      setTimeout(function(){
        if(typeof Braile.alphabet.en == 'undefined')
          waitForAlphabet(callBack);
        else{
          console.log('alphabet ready');
          callBack();
        }
      }, 100)
    }

    function nextCharacter (str, i) {
      console.log('write ' + str[i]);
      setTimeout(function(){
        $('#textInput').val($('#textInput').val() + str[i]);
        $('#braileInput').val(
          Braile.convertToBraile($('#textInput').val())
        );

        $('#textInput').change();
        if(str.length > i + 1)
          nextCharacter(str, i + 1);
      },200)
    };
  </script>
</body>
</html>